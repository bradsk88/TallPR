{"version":3,"file":"index.js","sources":["../dist-src/version.js","../dist-src/is-issue-labels-update-or-replace.js","../dist-src/index.js"],"sourcesContent":["export const VERSION = \"1.2.9\";\n","export function isIssueLabelsUpdateOrReplace({ method, url }) {\n    if (![\"POST\", \"PUT\"].includes(method)) {\n        return false;\n    }\n    if (!/\\/repos\\/[^/]+\\/[^/]+\\/issues\\/[^/]+\\/labels/.test(url)) {\n        return false;\n    }\n    return true;\n}\n","import { RequestError } from \"@octokit/request-error\";\nimport { VERSION } from \"./version\";\nimport { isIssueLabelsUpdateOrReplace } from \"./is-issue-labels-update-or-replace\";\nexport function enterpriseCompatibility(octokit) {\n    octokit.hook.wrap(\"request\", async (request, options) => {\n        // see https://github.com/octokit/rest.js/blob/15.x/lib/routes.json#L3046-L3068\n        if (isIssueLabelsUpdateOrReplace(options)) {\n            options.data = options.labels;\n            delete options.labels;\n            // for @octokit/rest v16.x, remove validation of labels option\n            /* istanbul ignore if */\n            if (options.request.validate) {\n                delete options.request.validate.labels;\n            }\n            return request(options);\n        }\n        // TODO: implement fix for #62 here\n        // https://github.com/octokit/plugin-enterprise-compatibility.js/issues/60\n        if (/\\/orgs\\/[^/]+\\/teams/.test(options.url)) {\n            try {\n                return await request(options);\n            }\n            catch (error) {\n                if (error.status !== 404) {\n                    throw error;\n                }\n                if (!error.headers || !error.headers[\"x-github-enterprise-version\"]) {\n                    throw error;\n                }\n                const deprecatedUrl = options.url.replace(/\\/orgs\\/[^/]+\\/teams\\/[^/]+/, \"/teams/{team_id}\");\n                throw new RequestError(`\"${options.method} ${options.url}\" is not supported in your GitHub Enterprise Server version. Please replace with octokit.request(\"${options.method} ${deprecatedUrl}\", { team_id })`, 404, {\n                    request: options,\n                });\n            }\n        }\n        return request(options);\n    });\n}\nenterpriseCompatibility.VERSION = VERSION;\n"],"names":[],"mappings":";;AAAO,MAAM,OAAO,GAAG,mBAAmB;;ACAnC,SAAS,4BAA4B,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE;AAC9D,IAAI,IAAI,CAAC,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;AAC3C,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,CAAC,8CAA8C,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;AACnE,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,OAAO,IAAI,CAAC;AAChB,CAAC;;ACLM,SAAS,uBAAuB,CAAC,OAAO,EAAE;AACjD,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,OAAO,EAAE,OAAO,KAAK;AAC7D;AACA,QAAQ,IAAI,4BAA4B,CAAC,OAAO,CAAC,EAAE;AACnD,YAAY,OAAO,CAAC,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC;AAC1C,YAAY,OAAO,OAAO,CAAC,MAAM,CAAC;AAClC;AACA;AACA,YAAY,IAAI,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE;AAC1C,gBAAgB,OAAO,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC;AACvD,aAAa;AACb,YAAY,OAAO,OAAO,CAAC,OAAO,CAAC,CAAC;AACpC,SAAS;AACT;AACA;AACA,QAAQ,IAAI,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;AACtD,YAAY,IAAI;AAChB,gBAAgB,OAAO,MAAM,OAAO,CAAC,OAAO,CAAC,CAAC;AAC9C,aAAa;AACb,YAAY,OAAO,KAAK,EAAE;AAC1B,gBAAgB,IAAI,KAAK,CAAC,MAAM,KAAK,GAAG,EAAE;AAC1C,oBAAoB,MAAM,KAAK,CAAC;AAChC,iBAAiB;AACjB,gBAAgB,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,6BAA6B,CAAC,EAAE;AACrF,oBAAoB,MAAM,KAAK,CAAC;AAChC,iBAAiB;AACjB,gBAAgB,MAAM,aAAa,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,6BAA6B,EAAE,kBAAkB,CAAC,CAAC;AAC7G,gBAAgB,MAAM,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,kGAAkG,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,aAAa,CAAC,eAAe,CAAC,EAAE,GAAG,EAAE;AACpO,oBAAoB,OAAO,EAAE,OAAO;AACpC,iBAAiB,CAAC,CAAC;AACnB,aAAa;AACb,SAAS;AACT,QAAQ,OAAO,OAAO,CAAC,OAAO,CAAC,CAAC;AAChC,KAAK,CAAC,CAAC;AACP,CAAC;AACD,uBAAuB,CAAC,OAAO,GAAG,OAAO,CAAC;;;;"}